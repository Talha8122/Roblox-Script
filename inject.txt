local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Admin listesi (yetkili oyuncular)
local admins = {
    ["AdminOyuncuAdi"] = true, -- kendi admin isminle değiştir
}

-- RemoteEvent oluştur veya bul
local eventName = "RemoveItemEvent"
local removeItemEvent = ReplicatedStorage:FindFirstChild(eventName)
if not removeItemEvent then
    removeItemEvent = Instance.new("RemoteEvent")
    removeItemEvent.Name = eventName
    removeItemEvent.Parent = ReplicatedStorage
end

-- Eşya silme fonksiyonu
local function removeItem(playerName, itemName)
    local target = Players:FindFirstChild(playerName)
    if not target then return end

    -- Backpack'teki eşya
    for _, tool in pairs(target.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.Name == itemName then
            tool:Destroy()
        end
    end

    -- Karakterdeki eşya
    if target.Character then
        for _, tool in pairs(target.Character:GetDescendants()) do
            if tool:IsA("Tool") and tool.Name == itemName then
                tool:Destroy()
            end
        end
    end

    print(playerName .. " isimli oyuncudan '" .. itemName .. "' silindi.")
end

-- RemoteEvent ile silme talebini dinle
removeItemEvent.OnServerEvent:Connect(function(sender, targetPlayerName, itemName)
    if not admins[sender.Name] then
        warn(sender.Name .. " yetkisiz eşya silmeye çalıştı!")
        return
    end

    if typeof(targetPlayerName) == "string" and typeof(itemName) == "string" then
        removeItem(targetPlayerName, itemName)
    end
end)
